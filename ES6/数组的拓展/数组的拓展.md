# js的数组

## ES5

数组是一个引用类型，我们可以通过js内置对象`Array`生成一个数组，也可以通过对象字面量法来生声明一个数组

### 检测数组

我们可以通过`instanceof`来检测一个数组，着已经可以得到一个令我们满意的结果，但是这个操作符的问题在于它假定只有一个全局执行环境，因此ES5新增了一个检测数组的方法`Array.isArray()`这个方法就可以很准确的判定一个数组，并且不用管是在哪个环境下中创建的。

### 转换方法

我们常用的有`join()`方法，可以通过给定参数数组中的值拼接成字符串，如果不传入任何数值或者传入`undefine`，则默认以逗号进行拼接。

### 数组的栈和队列

- `push()` 向栈中推入一个元素，//就是将数值加到末尾
- `pop()` 从栈顶去除一个元素  //从末尾取出一个元素
- `shift()`方法 移除数组中的第一项，并且删除这个元素，同时数组长度减1，结合`push()`和`shift()`可以模拟队列的过程。
- `unshift()`在数组前端添加任意项，并返回新的数组长度。

### 重排序的方法

- reverse() //反转数组的顺序，并不是倒序排列
- sort() 在sort()排序的过程中，会调用数组中每一项的toString()方法，然后比较得到的字符串确定如何排序，即使数组中的每一项都是数值，如果要采用排序时，会出现比较大的问题，sort()会接受一个比较函数作为参数

```js
function campare(val1,val2){
    if(val1 < val2){
        return -1;  
    }else if(val1 > val2){
        return 1;
    }else{
        return 0;
    }
}

var arr = [0,1,5,20,10];
arr.sort(compare);
```

我们可以这样来实现我们预期要求的排序结果，

### 操作方法

- `concat()`可以基于数组创建一个新的数组，如果concat()方法接受的不只是一个数组，其会将这些参数中的数组依次拼接到数组末尾。这与ES6中的...预算符比较类似
- `slice()` 它能够基于当前数组中的一个或者多个创建一个新数组，`slice()`一般接受两个参数，就是要返回项的起始和末尾位置，如果只有一个参数，则从该位置一直到数组末尾。如果参数为复数，则代表从末尾开始。
- `splice()`，数组中最强大的方法
> - **删除操作**：需要指定两个参数，一个是要删除的起始位置，一个是要删除的个数
> - **插入操作**: 需要接受三个参数，起始位置，要删除的项数，如果不删除，则设置为0，后面为我们要插入的选项。
> - **替换操作**: 需要接受三个参数，起始位置，要删除的项数，然后再插入要替换的项。

总结一下，我们在使用`splice()`时，其实是先找到起始位置，然后根据第二个参数进行删除操作，我们判断一下是否有第三个参数，如果有，我们就对其进行插入操作，这样一来，就可以很灵活实现增删改。

### 位置方法

- `indexOf()`从起始位置开始查找，如果找到返回索引，找不到返回-1,但是其采用的是`===`,会出现
`[NAN].indexOf(NAN) //-1`这种情况，ES6中对其进行了优化，可以使用`includes`来代替`indexOf`
- `laseIndexOf()`是从数组的末尾开始查找。

### 迭代方法

#### 返回布尔值

> - `every()`对数组中的每一项运行指定函数，如果每一项都返回true,则返回true，简单来说，可以用来盘丢你个数组中的每一项是否满足每个要求是调用。
> - `some()`对数组中的每一项运行指定函数，如果其中有一项返回`true`,则整体返回`true`

#### 返回数组

> - `filter()`对数组中的每一项运行指定函数，其返回的是一个由调用函数返回`true`项的`数组`，可以用来过滤某些不符合要求的项
> - `map()`对数组中的每一项运行指定函数，返回函数调用结果组成的数组，一般用来通过原数组项生成`新的数组`，`React`中列表渲染用的比较多

#### 简单遍历,无返回值

`forEach()`，对数组中的每一项运行指定函数，该函数没有返回值

### 归并与方法

`reduce()`和`reduceRight()`都接受两个参数，在每一项上调用的函数和作为归并的基础的初始值。给两个方法传的参数接受四个参数，前一个值，当前值，项的索引和数组中对象，，这个函数的返回值都会作为第一个参数传给下一项，可以通过该方法实现数组中的每一项求和操作。

## ES6中的数组

### `...`拓展运算符

- 展开数组
- 通过`[...arr1,...arr2]`拼接数组
- 通过`concat()`复制数组
- 通过与解构赋值结合，用于生成新数组，拓展运算符用于解构赋值，只能用于最后一位，否则会报错
- 通过`[..."hello"]`将字符串转换为数组
- 可以将`iterator`对象，转换为真正的数组
- `...`适用于`Map、Set`结构，`Generator`函数，`Generator`会将每一次内部得到的值转换为一个数组。Generator函数执行之后返回的是一个遍历器对象，对这个遍历器执行拓展运算符，它会将内部遍历到的值，转为一个数组。

### Array.from()

Array.from()方法用于将两类对象准换为真正的数组:类数组对象，可遍历的对象，

```js
let arrayLike = {
    '0':'a',
    '1':'b',
    '3':'c',
    length:3
}
//Es5写法
let arr1 = [].slice.call(arratLike);
//Es6写法
let arr2 = Array.from(arrayLike);
```

实际应用场景中，Dom操作返回的NodeList集合，以及函数内部的arguments对象。Array.from都可以将他们转换为真正的数组。同时我们也可以直接通过...拓展运算符对他们进行转换
将arguments直接转换为数组`const args = [...arguments];`，NodeList对象`[...document.querySelectorAll('div')]`,其实拓展运算符背后就是遍历器接口`Symbol.iterator`，如果一个对象没有部署这个接口，就无法转换，类数组对象本质由一个特点就是必须有`length`属性，任何由`length`属性的对象，都可以通过`Array.from`方法转换为数组,但是这个对象不能通过拓展运算符进行转换，在es6之前我们都是通过`Array.prototype.slice`方法进行抓换。`Array.from`还可以接受第二个参数，作用类似于数组的`map`方法,其还可以将字符串转换为字符数组，这一点与`...`拓展功能相同

### Array.of

`Array.of`用于将一组值，准换为数组。

```js
Array.of(2,3,4,5) //[2,3,4,5]
```

如果当参数的个数小于两个的时候，其设定的是一个长度为参数的数组，并不是由单个数字组成的数组，我们可以通过`Array.of`来代替`Array()`或者`new Array()`,并且不会导致重载，并且行为非常统一。`Array.of`的内部实现

```js
function  Arrayof(){
    return [].slice.call(arguments);
}
```

### fund() && findIndex()

数组实例的`find`方法，用于找到第一个符合条件的数组成员。他的参数是一个回调函数，所有数组成员是一个回调函数，所有数组依次执行该回调函数，找到第一个返回true的成员。
`findIndex`与find的区别是返回索引，如果找不到则返回-1。

### fill

用于填充数组,主要用途可以用作数组中的初始化。
`['a','b','c'].fill(7) //[7,7,7]`,如果填充是一个引用类型的对象，其实是一个执行这个对象的引用

### 数组实例的entries(),keys(),values()

这三个方法都用来遍历数组，但是他们返回的是一个遍历对象`iterator`，可以通过`for...of`进行遍历，

- `key()`是对键的遍历
- `values()`是对值的遍历
- `entries()`是对键和值的遍历

对于数组，我们可能对这几个方法不太常用，但是对于对象，却有很大的用处。

### includes

该方法用于判定数组中是否包含某个值，该方法与字符串类似，其与`indexof()`方法来说，更加语义化，`indexof`是找到参数值的第一个参数位置，二是其内部采用 `===`进行判断，这会导致`NAN`的误判

### flat(),flatMap()

数组的成员有时还是数组，`Array.prototype.flat()`用于将嵌套的数组“拉平”，变成一维的数组。该方法返回一个`新数组`，对原数据没有影响,其参数值代表扁平化数组的层数，默认值是1.而且在展开的过程中，会自动忽略空元素。

`flatMap()`是先对数组执行`map`操作，然后对返回值执行`flat()`操作，`flatMap`只能展开一层数组。

## ES6对数组空位的处理

- forEach(),filter(),reduce(),every()和some()都会跳过空格。
- map()会跳过空位，但是保留这个值
- join()和toString()会将空位是为undefine,而undefine和null会被处理为空的字符串
